# é ç®—ç³»çµ±é–‹ç™¼ä»»å‹™åˆ†é…

> ğŸ“„ **æŠ€è¡“è¦æ ¼æ–‡ä»¶**: `/docs/specs/budget-system-spec.md`

---

## ğŸ—„ï¸ Task 1: Database Schema

**Assignee**: \***\*\_\*\***  
**Priority**: High  
**Estimated**: 2-3 days  
**Phase**: 1 (èˆ‡ Task 2 åŒæ™‚é€²è¡Œ)

### ç›®æ¨™

å»ºç«‹é ç®—ç³»çµ±æ‰€éœ€çš„è³‡æ–™è¡¨çµæ§‹ã€‚

### å·¥ä½œé …ç›®

1. **å»ºç«‹ `Budget` è¡¨** - åƒè€ƒè¦æ ¼ Section 2.1
2. **å»ºç«‹ `BudgetCategory` è¡¨** - åƒè€ƒè¦æ ¼ Section 2.2
3. **å»ºç«‹ `TransactionBudget` è¡¨** - åƒè€ƒè¦æ ¼ Section 2.3
4. **å»ºç«‹ `BudgetPeriodSnapshot` è¡¨** - åƒè€ƒè¦æ ¼ Section 2.4
5. **å»ºç«‹ Migration æª”æ¡ˆ** (Sequelize)
6. **å»ºç«‹ Seed æª”æ¡ˆ** (æ¸¬è©¦è³‡æ–™)

### é©—æ”¶æ¨™æº–

- [ ] Migration å¯æ­£å¸¸åŸ·è¡Œ (`pnpm db:migrate`)
- [ ] æ‰€æœ‰ FK é—œè¯æ­£ç¢º
- [ ] Index å»ºç«‹åœ¨å¸¸ç”¨æŸ¥è©¢æ¬„ä½

---

## ğŸ¨ Task 2: Frontend UI (Mock Data)

**Assignee**: \***\*\_\*\***  
**Priority**: High  
**Estimated**: 4-5 days  
**Phase**: 1 (èˆ‡ Task 1 åŒæ™‚é€²è¡Œ)

### ç›®æ¨™

ä½¿ç”¨å‡è³‡æ–™å»ºç«‹é ç®—ç³»çµ±å‰ç«¯ä»‹é¢ï¼Œç¬¦åˆ API è¦æ ¼çµæ§‹ã€‚

### ä¾è³´

- ç„¡ï¼ˆä½¿ç”¨ Mock Dataï¼‰

### å·¥ä½œé …ç›®

#### 2.1 Mock Data å»ºç«‹

1. **å»ºç«‹ Mock Service** (`/services/mock/budgetMock.ts`)
   - æ¨¡æ“¬ API Response çµæ§‹
   - åŒ…å«ï¼šBudget åˆ—è¡¨ã€è©³æƒ…ã€ä½¿ç”¨ç‡ã€æ­·å² Snapshots
   - æ¨¡æ“¬å»¶é² (simulate loading state)

#### 2.2 UI å…ƒä»¶

2. **é ç®—åˆ—è¡¨é é¢** - åƒè€ƒè¦æ ¼ Section 5.2
3. **é ç®—æ–°å¢/ç·¨è¼¯è¡¨å–®** - åƒè€ƒè¦æ ¼ Section 5.1
   - â— **ç°¡åŒ–ç‰ˆ**ï¼šä¸åŒ…å«å­é ç®—/é—œè¯åˆ†é¡è¨­å®š
4. **é ç®—è©³æƒ…é é¢ + å­é ç®—ç®¡ç†** - åƒè€ƒè¦æ ¼ Section 5.6
   - é¡¯ç¤ºå­é ç®—åˆ—è¡¨åŠä½¿ç”¨ç‡
   - ã€Œ+ æ–°å¢å­é ç®—ã€åŠŸèƒ½ï¼šä¸‹æ‹‰é¸å–®åªåˆ— **MainCategory**
   - å¯ç·¨è¼¯/åˆªé™¤å­é ç®—
5. **é ç®—ä¿®æ”¹ç¢ºèª Modal** - åƒè€ƒè¦æ ¼ Section 5.3
6. **äº¤æ˜“è¡¨å–®ã€Œæ­¸å…¥é ç®—ã€æ¬„ä½** - åƒè€ƒè¦æ ¼ Section 5.5
   - â— **å¤šé¸ Popover UI**ï¼šTag åœ¨é¸æ“‡æ¡†å…§ï¼ŒCheckbox æ¸…å–®
   - é è¨­é¡¯ç¤ºã€Œç„¡é ç®—å°ˆæ¡ˆã€
   - é¸æ“‡å¾Œä¸è‡ªå‹•é—œé–‰ Popover
7. **é‡ç®—ä¸­ç‹€æ…‹ UI** - Loading skeleton + ç¦ç”¨æŒ‰éˆ•
8. **å›æº¯è£œå¸³ç¢ºèª Modal** - åƒè€ƒè¦æ ¼ Section 3.6
9. **é¦–é é ç®— Widget** - åƒè€ƒè¦æ ¼ Section 5.2

### é©—æ”¶æ¨™æº–

- [ ] æ‰€æœ‰é é¢éŸ¿æ‡‰å¼
- [ ] Light/Dark mode æ”¯æ´
- [ ] Mock Data çµæ§‹èˆ‡ API è¦æ ¼ä¸€è‡´
- [ ] å¯åˆ‡æ› Mock/Real API (ç’°å¢ƒè®Šæ•¸)

---

## âš™ï¸ Task 3: Backend API

**Assignee**: \***\*\_\*\***  
**Priority**: High  
**Estimated**: 5-7 days  
**Phase**: 2 (ç­‰å¾… Phase 1 å®Œæˆ)

### ç›®æ¨™

å¯¦ä½œé ç®—ç³»çµ±çš„å¾Œç«¯ API èˆ‡æ¥­å‹™é‚è¼¯ã€‚

### ä¾è³´

- âœ… Task 1 (Database) å®Œæˆ

### å·¥ä½œé …ç›®

#### 3.1 Core CRUD

1. **Budget API** - åƒè€ƒè¦æ ¼ Section 4.1
2. **BudgetCategory API** - åƒè€ƒè¦æ ¼ Section 4.2
   - â— **åˆ†é¡é™åˆ¶**ï¼šåªæ¥å— MainCategory ç­‰ç´šçš„åˆ†é¡
   - é©—è­‰ `categoryId` çš„ `parentId` å¿…é ˆæŒ‡å‘ Root Category
3. **Statistics API** - åƒè€ƒè¦æ ¼ Section 4.3

#### 3.2 Business Logic

4. **é€±æœŸè¨ˆç®—** - åƒè€ƒè¦æ ¼ Section 3.1
5. **ä½¿ç”¨ç‡è¨ˆç®—** - åƒè€ƒè¦æ ¼ Section 3.3
   - â— åŸºæ–¼ `TransactionBudget` é—œè¯ï¼Œè€Œé Category
6. **ä¿®æ”¹ç”Ÿæ•ˆæ™‚é–“** - åƒè€ƒè¦æ ¼ Section 3.4

#### 3.3 Advanced

7. **Alert è§¸ç™¼** - åƒè€ƒè¦æ ¼ Section 3.5
8. **å›æº¯è£œå¸³è™•ç†** - åƒè€ƒè¦æ ¼ Section 3.6
9. **Snapshot æƒ°æ€§å»ºç«‹** - åƒè€ƒè¦æ ¼ Section 3.7
10. **ä¿®æ”¹ Transaction Service** - å„²å­˜ `TransactionBudget` é—œè¯ï¼ˆbudgetIds é™£åˆ—ï¼‰

### é©—æ”¶æ¨™æº–

- [ ] æ‰€æœ‰ API å¯æ­£å¸¸é‹ä½œ
- [ ] Unit Test è¦†è“‹æ ¸å¿ƒé‚è¼¯ (follow `backend-testing-standard`)
- [ ] BudgetCategory åªå…è¨± MainCategory
- [ ] å›æº¯è£œå¸³å¯è§¸ç™¼é‡ç®—

---

## ğŸ”— Task 4: Frontend API Integration

**Assignee**: \***\*\_\*\***  
**Priority**: High  
**Estimated**: 2-3 days  
**Phase**: 3 (ç­‰å¾… Phase 2 å®Œæˆ)

### ç›®æ¨™

å°‡å‰ç«¯å¾ Mock Data åˆ‡æ›ç‚ºçœŸå¯¦ APIã€‚

### ä¾è³´

- âœ… Task 2 (Frontend UI) å®Œæˆ
- âœ… Task 3 (Backend API) å®Œæˆ

### å·¥ä½œé …ç›®

1. **å»ºç«‹ API Service** (`/services/api/budgetApi.ts`)
   - æ›¿æ› Mock Service
   - çµ±ä¸€éŒ¯èª¤è™•ç†

2. **ä¸²æ¥æ‰€æœ‰ API Endpoints**
   - Budget CRUD
   - BudgetCategory CRUD
   - Statistics API

3. **å¯¦ä½œ WebSocket/SSE**
   - æ¥æ”¶é‡ç®—å®Œæˆé€šçŸ¥
   - ç€è¦½å™¨é€šçŸ¥

4. **E2E æ¸¬è©¦**
   - å®Œæ•´æµç¨‹æ¸¬è©¦

### é©—æ”¶æ¨™æº–

- [ ] æ‰€æœ‰åŠŸèƒ½èˆ‡çœŸå¯¦ API æ­£å¸¸é‹ä½œ
- [ ] éŒ¯èª¤è™•ç†å®Œå–„
- [ ] E2E Test é€šé

---

## ğŸ“… é–‹ç™¼æ™‚ç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 1 (Week 1)                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Task 1: DB Schema   â”‚ â”‚ Task 2: Frontend UI (Mock)      â”‚ â”‚
â”‚ â”‚ 2-3 days            â”‚ â”‚ 4-5 days                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Phase 2 (Week 2)                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Task 3: Backend API                                     â”‚ â”‚
â”‚ â”‚ 5-7 days                                                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Phase 3 (Week 3)                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Task 4: Frontend API Integration + E2E Testing          â”‚ â”‚
â”‚ â”‚ 2-3 days                                                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
